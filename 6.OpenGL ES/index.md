## GLSL ES

GLSL ES 编程语言是在OpenGL着色器语言（GLSL）的基础上，删除和简化一部分功能后形成的。因为GLSL ES常用在一些嵌入式设备，这样可以降低性能的开销。

## 数值类型

- 数值类型：整数(int)、浮点数(float)
- 布尔(bool)

不支持字符串。

## 类型

GLSL ES 是强类型语言，在声明变量时需要指定变量的类型

<类型> <变量名>

```
vec4 a_Position
```

如果需要将其他类型的变量赋值给另一种类型的变量，需要进行类型转换：

```
float f1 = float(8)
```

常见的**内置转换函数**和**运算符**可见p191。

## 矢量和矩阵

GLSL ES 因为用来处理图形学，所以内置支持矢量和矩阵类型，矢量或矩阵中的值也只能是基础类型（数值类型、布尔类型）。

具体支持的矢量和矩阵类型可见p192。

在声明矢量或者矩阵类型时，可以使用GLSL ES 内置支持的**构造函数**：

```
vec4 position = vec4(1.0, 1.0, 1.0, 1.0)
```

如果传递给构造函数的参数少于需要的参数，那么会给其他分量赋予默认值，p193。

在使用矩阵构造函数时，需要注意的是存储在矩阵中的元素是按**列主序**方式排列的。当时也可以向构造函数中传入矢量：

```
vec2 v1 = vec2(1.0, 3.0)
vec2 v2 = vec2(2.0, 4.0)

mat2 m2 = mat2(v1, v2)

// 1.0 2.0
// 3.0 4.0
```

通过 . 或者 [] 运算符可以访问矢量或者矩阵中的元素，p195。

通过 . 运算符配合x、y、z可以访问矢量的分量，也可以混合在一起访问：

```
vec3 v3 = vec3(1.0, 2.0, 3.0)

v3.x // 1.0
v3.y // 2.0
v3.z // 3.0

v3.xy // (1.0, 2.0)
```

如果访问不存在的分量则会报错。

使用 [] 运算符可以访问矩阵的元素，和JavaScript的二维数组类似，p196：

```
mat4 m4 = mat4(
  
)
```

## 矢量和矩阵运算

p198

### 矢量浮点数运算

### 矢量运算

### 矩阵和浮点数运算

### 矩阵右乘矢量：mat * vec

### 矩阵左乘矢量

### 矩阵乘以矩阵

## 结构体（struct）

p200。

```
struct light {
  vec4 color;
  vec3 position;
}
```

## 数组

GLSL ES 只支持一维数组。

```
flaot floatArray[4]
vec4 vec4Array[2]
```

数组元素也可以通过索引值来访问，起始索引值是0。


## 取样器（纹理）

GLSL ES 中必须通过取样器类型的变量来访问纹理。有两种基本取样器：Sampler2D和samplerCube。取样器只能是uniform变量。

```
uniform sampler2D u_Sampler;
```

**唯一能够赋值给取样器变量的就是纹理单元编号，而且必须使用webGL的gl.uniform1i来进行赋值**。

## 分支和循环

GLSL ES 也支持分支和循环语句，使用起来和C语言类似。也支持使用break continue等语句

## 函数

```
函数返回类型 函数名 (arg0, arg1) {
  计算
  return 返回值
}
```

GLSL ES 内置大量函数，具体可见p208。

## 全局变量、局部变量

## 存储限定符

## 精度限定符
