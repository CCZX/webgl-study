## 着色器

### 1. 顶点着色器

用来描述顶点的特性，比如位置颜色等。顶点是二维或者三维空间的一个点，比如断点或者交点。

内置变量：
1. vec4 gl_Position：表示顶点的位置
2. float gl_PointSize：表示点的尺寸

vec4有四个浮点数组成，由四个分量组成的矢量，这个矢量被称之为**齐次坐标**：如果第四个分量等于1.0，那么可以把该齐次坐标看做前三个分量的值。其次坐标(x, y, z, w)等于三维坐标(x/w, y/w, z/w)。在三维图形系统中齐次坐标被大量使用，因为使用其次坐标可以表示一个物体距离观察者的距离。参考：https://www.zhihu.com/question/59595799

变量类型：
1. attribute：传输与顶点相关的数据
2. uniform：传输所有顶点都相同或与顶点无关的数据

### 2. 片元着色器

进行着片处理的过程，比如光照，我们可以将片元理解为像素。

内置变量：
1. vec4 gl_FragColor：指定片元的颜色（rgba）

变量类型：
1. varying：可变的变量，从顶点着色器向片元着色器传递数据
2. uniform：一致的

## webGL程序执行过程

1. 执行加载的JavaScript程序
2. 执行webGL相关方法
3. 渲染到颜色缓冲区
4. 读取缓冲区内容并渲染

## 获取webGL变量并赋值

大致步骤：
1. 在着色器中声明变量
2. 获取变量所在的存储地址
3. 向变量传输数据

以attribute变量为例
1. attribute vec4 a_Position
2. gl.getAttribLocation()
3. gl.vertexAttrib3f()

## 赋值

gl.vertexAttrib3f可以给变量赋值，对于vec4类型的变量，如果没有赋值的变量那么x , y , z 默认是1.0, 第四个变量是1.0，详情可见 p44

## 绘制

webGL系统中的绘制实际上是在颜色缓冲区中进行绘制，绘制结束后系统将颜色缓冲区的内容显示在屏幕上，然后颜色缓冲区的内容就会被重置，其中的内容就会丢失。

所以如果我们需要在不同时间绘制不同的节点，即现在时刻需要绘制上一个时刻的节点，我们需要将之前的节点都记录下来。
